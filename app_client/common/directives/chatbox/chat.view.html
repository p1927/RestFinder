<div class="container chatstyle" ng-init='vm.start()'>
  <link rel="stylesheet" href="/stylesheets/chat.css">
  <div class="row" >
    <div class="col-xs-12 col-sm-4" id="chatapp">
      <!--Heading////////////////////////////////////////////////////////////////////////////////////////////-->
      <div  class="panel panel-primary ">
        <div class="panel panel-primary panel-heading" >
          <span class=""><img src="/images/chat.png" height="20px" width="20px"/>&nbsp;</span> {{ vm.msgData.room }}
          <!--  <div class="btn-group pull-right">
            <button type="button" class="btn btn-default btn-xs" ng-click="vm.logout()">
            Logout
            </button>
          </div> -->
          <div class="btn-group pull-right" ng-click="vm.collapse()">
            <span class="glyphicon" ng-class="{'glyphicon-chevron-up': vm.collapsed,'glyphicon-chevron-down': !vm.collapsed}"  ></span>
            
          </div>
        </div>
        <div class="chatbox " ng-hide="vm.collapsed" ng-if="vm.joinned">
          <div id="scrollMe" class="panel-body" >
            <ul class="chat">
              <li ng-repeat="c in vm.chats">
                <div class="left clearfix" ng-if="c.name===vm.msgData.name">
                  
                  <div class="chat-body clearfix">
                    <div class="header">
                      <strong class="primary-font heavyfont">{{ c.name }}</strong> <small class="pull-right text-muted">
                      <span class=""></span>{{ c.updated_at | date: 'dd, MMM H:mm' }}</small>
                    </div>
                    <p class="col-xs-9 mybox">{{ c.message }}</p>
                  </div>
                </div>
                
                <div class="right clearfix" ng-if="!(c.name===vm.msgData.name)" >
                  
                  <div class="chat-body clearfix">
                    <div class="header">
                      <small class=" text-muted"><span class=""></span>{{ c.updated_at | date: 'dd, MMM H:mm' }}</small>
                      <strong class="pull-right primary-font heavyfont">{{ c.name }}</strong>
                    </div>
                    <p class="col-xs-9 otherbox pull-right">{{ c.message }}</p>
                  </div>
                </div>
              </li>
            </ul>
          </div>
          <div class="panel-footer">
            <form ng-submit="vm.sendMessage()" >
              <div class="input-group">
                <input type="hidden" ng-model="vm.msgData.room" name="room" />
                <input type="hidden" ng-model="vm.msgData.name" name="name" />
                <input id="btn-input" type="text" ng-model="vm.msgData.message" name="message" class="form-control input-sm" placeholder="Type your message here..." required="" />
                <span class="input-group-btn">
                  <button class="btn btn-success btn-sm" id="btn-chat" >
                  Send</button>
                </span>
              </div>
            </form>
          </div>
        </div>
        <div class="chatbox panel-body"  ng-hide="vm.collapsed" ng-if="(!vm.joinned)&&(!vm.currentUser)">
          <p class="heavyfont">Join chat as Guest. Please Enter Your Name</p>
          <form ng-submit="vm.joinRoom()"  #joinForm="ngForm">
            <div class="form-group">
              <input type="text" class="form-control" ng-model="vm.newUser.name" name="name" placeholder="Name" required="" />
            </div>
            <!--  <div class="form-group">
              <select class="form-control" ng-model="vm.newUser.room" name="room" required="">
                <option>Select Room</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
              </select>
            </div> -->
            <div class="form-group">
              <button type="submit" class="btn btn-success" >Join</button>
            </div>
          </form>
        </div>
        
      </div>
      <!--Chat tab close////////////////////////////////////////////////////////////////////////////////////////////-->
      <!--Chatclose////////////////////////////////////////////////////////////////////////////////////////////-->
      
      
    </div>
  </div>
</div>